#!/bin/bash

CCROOT_DIR=$(dirname "$(dirname "$(readlink -f "$0")")")
CCROOT_BIN_DIR="$CCROOT_DIR/bin"
CCROOT_HOST_DIR="$CCROOT_DIR/host"
CCROOT_CONFIGS_DIR="$CCROOT_DIR/configs"
CCROOT_PACKAGES_DIR="$CCROOT_DIR/packages"
CCROOT_DOWNLOADS_DIR="$CCROOT_DIR/downloads"
CCROOT_SCRIPTS_DIR="$CCROOT_DIR/scripts"
CCROOT_TOOLS_DIR="$CCROOT_DIR/tools"
CCROOT_TESTS_DIR="$CCROOT_DIR/tests"
CCROOT_WEB_DIR="$CCROOT_DIR/web"

export CCROOT_DIR="$CCROOT_DIR"
export CCROOT_BIN_DIR="$CCROOT_BIN_DIR"
export CCROOT_HOST_DIR="$CCROOT_HOST_DIR"
export CCROOT_CONFIGS_DIR="$CCROOT_CONFIGS_DIR"
export CCROOT_PACKAGES_DIR="$CCROOT_PACKAGES_DIR"
export CCROOT_DOWNLOADS_DIR="$CCROOT_DOWNLOADS_DIR"
export CCROOT_SCRIPTS_DIR="$CCROOT_SCRIPTS_DIR"
export CCROOT_TOOLS_DIR="$CCROOT_TOOLS_DIR"
export CCROOT_TESTS_DIR="$CCROOT_TESTS_DIR"
export CCROOT_WEB_DIR="$CCROOT_WEB_DIR"

export PATH="$CCROOT_BIN_DIR:$PATH"

# get all params and run python tool
# check python3 is installed
if ! command -v python3 &> /dev/null; then
    echo "Python3 is not installed. Please install Python3 to use ccroot."
    exit 1
fi

# get the python absolute path
PYTHON_PATH=$(command -v python3)
if [ -z "$PYTHON_PATH" ]; then
    echo "Python3 is not found in PATH. Please install Python3 to use ccroot."
    exit 1
fi

$PYTHON_PATH $CCROOT_BIN_DIR/ccroot.py $@



